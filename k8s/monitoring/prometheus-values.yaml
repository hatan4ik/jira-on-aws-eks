prometheus:
  prometheusSpec:
    retention: 30d
    scrapeInterval: 30s
    evaluationInterval: 30s
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: gp3
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 100Gi
    additionalScrapeConfigs:
    - job_name: 'jira-jmx'
      static_configs:
      - targets: ['jira.jira-prod.svc.cluster.local:9999']
      metrics_path: /metrics
      scrape_interval: 30s
    - job_name: 'postgres-exporter'
      static_configs:
      - targets: ['postgres-exporter.jira-prod.svc.cluster.local:9187']
    ruleSelector:
      matchLabels:
        app: jira
        prometheus: kube-prometheus
        role: alert-rules

grafana:
  enabled: true
  adminPassword: "admin123"
  persistence:
    enabled: true
    storageClassName: gp3
    size: 10Gi
  
  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
      - name: 'jira'
        orgId: 1
        folder: 'Jira'
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /var/lib/grafana/dashboards/jira

alertmanager:
  enabled: true
  alertmanagerSpec:
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: gp3
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 10Gi